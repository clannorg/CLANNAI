# Video Player Specification

## Overview
This document describes how to recreate the video player from the ClannAI frontend as a standalone local web app.

## Core Features to Implement

### 1. Video Playback
- **Local file input** - Allow users to select video files from their computer
- **Adaptive streaming** - Support HLS and MP4 formats
- **Fullscreen support** - Toggle fullscreen mode
- **Video controls** - Play/pause, seek, volume, playback speed
- **Timeline overlay** - Visual timeline with event markers

### 2. Event Tagging System
- **Event creation** - Click timeline to create events
- **Event types** - Shot, Foul, Turnover, Kickout, etc.
- **Team assignment** - Red vs Blue teams
- **Outcome tracking** - Won/Lost, 2Point/3Point/Miss, etc.
- **Auto-generation** - Automatic events based on rules

### 3. Sidebar Interface
- **Events list** - Show all tagged events
- **Event filtering** - Filter by team, action type, outcomes
- **Event editing** - Edit existing events
- **Event deletion** - Delete individual or all events
- **Toggle visibility** - Show/hide sidebar

### 4. Timeline Features
- **Visual markers** - Color-coded event indicators
- **Click to seek** - Click timeline to jump to event
- **Current event highlighting** - Highlight current event
- **Filtered view** - Show only filtered events on timeline

## Component Architecture

### Main Components
```
VideoPlayerWithEvents (Main wrapper)
├── VideoPlayerContainer (Video + controls)
│   ├── AdaptiveVideoPlayer (Video element)
│   ├── VideoPlaybackControls (Bottom controls)
│   ├── VideoOverlayTimeline (Timeline overlay)
│   └── GameScoreBanner (Score display)
└── EventsManager (Sidebar)
    └── SidebarEventsList (Events list)
```

### Key Hooks
- `useMatchTagging` - Event management and validation
- `useVideos` - Video loading and state (replace with local file handling)

## Data Structures

### Event Object
```typescript
interface Event {
  id: string;
  time: number;
  team: 'red' | 'blue';
  action: ActionType;
  outcome: OutcomeType;
  autoGenerated: boolean;
  validated: boolean;
}
```

### Match State
```typescript
interface MatchState {
  currentTime: number;
  videoState: {
    isPlaying: boolean;
    duration: number;
    currentTime: number;
  };
  teams: {
    red: TeamInfo;
    blue: TeamInfo;
  };
  tagHistory: Event[];
  activeTag: PartialEvent | null;
  currentPossession: 'red' | 'blue' | null;
  currentScore: { red: number; blue: number };
}
```

## Local Implementation Strategy

### 1. File Handling
- Use HTML5 `<input type="file">` for video selection
- Create object URLs for local video files
- Handle multiple video formats (MP4, WebM, etc.)

### 2. State Management
- Replace API calls with local state
- Use React state for events, video info, etc.
- Store events in localStorage for persistence

### 3. Event System
- Copy the event tagging logic from `useMatchTagging`
- Implement local event storage
- Keep all validation and auto-generation rules

### 4. UI Components
- Copy all UI components (Button, Sidebar, etc.)
- Keep the same styling and layout
- Maintain responsive design

## Key Features to Preserve

### Layout
- Video on left, sidebar on right
- Toggleable sidebar (show/hide)
- Fullscreen mode with floating sidebar
- Responsive design

### Event Management
- Click timeline to create events
- Auto-generate related events
- Validate event sequences
- Filter and search events

### Visual Features
- Color-coded events by team and type
- Timeline markers for events
- Current event highlighting
- Score tracking

## Implementation Steps

1. **Create new Next.js app**
2. **Copy core components** (VideoPlayerWithEvents, VideoPlayerContainer, etc.)
3. **Copy UI components** (Button, Sidebar, etc.)
4. **Copy hooks** (useMatchTagging, etc.)
5. **Replace API calls** with local file handling
6. **Add file input** for local video selection
7. **Test with local video files**

## Dependencies to Include
- React/Next.js
- Tailwind CSS
- Lucide React (icons)
- Sonner (toasts)
- React Query (optional, for state management)

## Notes
- The current player uses API calls for video loading - replace with local file handling
- Keep all the event tagging logic and validation rules
- Maintain the same UI/UX but with local data
- Test with various video formats and file sizes 